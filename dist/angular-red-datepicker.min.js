/*!
 * angular-red-datepicker
 * https://github.com/johnnyswan/angular-red-datepicker
 * Red Swan
 * Version: 0.1.4 - 2017-03-03T14:17:03.165Z
 * License: MIT
 */
!function(){"use strict";function t(){return{restrict:"E",templateUrl:"angular-red-datepicker.html",scope:{locale:"@?",output:"=?",todayBtn:"@?",numberOfDays:"@?",listShow:"@?",listArr:"=?"},controller:a,controllerAs:"calendar",bindToController:!0}}function a(t,a,e){function n(t,a){return 1===t&&a.push(a.splice(0,1)[0]),a}function r(t){t.fade&&!t.afterCurrentNextMonth?t.beforeMonth?p.monthChange(p.month.id,"left"):t.nextMonth&&p.monthChange(p.month.id,"right"):p.daySelect(t)}function d(t){if(!t.afterCurrentNextMonth&&!t.afterCurrent)if(t.active=!t.active,2===p.selectedDays.length){for(var a=0,e=p.selectedDays.length;a<e;a++)p.selectedDays[a].active=!1;p.selectedDays.length=0,p.selectedDays.push(t)}else 1===p.selectedDays.length?(p.selectedDays.push(t),p.activeRange(p.selectedDays)):p.selectedDays.push(t)}function o(a){t(a[0].date).isBefore(a[1].date)?(p.startSelection=t(a[0].date).toArray(),p.endSelection=t(a[1].date).toArray()):(p.startSelection=t(a[1].date).toArray(),p.endSelection=t(a[0].date).toArray()),p.inputStart=t(p.startSelection).format("L"),p.inputEnd=t(p.endSelection).format("L"),p.output={start:p.inputStart,end:p.inputEnd},p.monthShow=new p.calendarArray(t([p.year,p.month.id-1,1]))}function s(a,e){var n=t([p.year,a-1,1]);"left"===e?(1===+p.month.id&&(p.year=n.subtract(1,"year").format("YYYY")),p.month.name=n.subtract(1,"month").format("MMMM"),p.month.id=t().month(p.month.name).format("M"),p.monthShow=new p.calendarArray(t([p.year,p.month.id-1,1]))):"right"===e&&(12===+p.month.id&&(p.year=n.add(1,"year").format("YYYY")),p.month.name=n.add(1,"month").format("MMMM"),p.month.id=t().month(p.month.name).format("M"),p.monthShow=new p.calendarArray(t([p.year,p.month.id-1,1])))}function l(a){var e=t([p.year,p.month.id-1,1]);"left"===a?(p.year=e.subtract(1,"year").format("YYYY"),p.monthShow=new p.calendarArray(t([p.year,p.month.id-1,1]))):"right"===a&&(p.year=e.add(1,"year").format("YYYY"),p.monthShow=new p.calendarArray(t([p.year,p.month.id-1,1])))}function i(a){var e=t(a).startOf("month"),n=t(a).subtract(1,"month").endOf("month").startOf("day"),r=t(a).add(1,"month").startOf("month"),d=t(a).startOf("month").format("d"),o=t(a).endOf("month").format("d");return p.getPreviousMonth(n,d).concat(p.getCurrentMonth(e),p.getNextMonth(r,o))}function c(a,e){var n=[],r="",d="";r=0===p.weekStartDay?Number(e)?1===e?8:e:7:Number(e)?1===e?7:e-1:6,d=a.subtract(r-1,"day");for(var o=0;o<r;o++){var s={str:+d.format("D"),current:d.isSame(p.today.date),date:d.toArray(),fade:!0,active:!1,beforeMonth:!0,selected:d.isBetween(p.startSelection,p.endSelection,null,"[]"),dayStart:d.isSame(t(p.startSelection)),dayEnd:d.isSame(t(p.endSelection))};n.push(s),d.add(1,"day")}return n}function h(a){for(var e=[],n=0,r=a.daysInMonth();n<r;n++){var d={str:+a.format("D"),current:a.isSame(p.today.date),date:a.toArray(),fade:!1,afterCurrent:a.isAfter(p.today.date),active:!1,selected:a.isBetween(p.startSelection,p.endSelection,null,"[]"),dayStart:a.isSame(t(p.startSelection)),dayEnd:a.isSame(t(p.endSelection))};e.push(d),a.add(1,"day")}return e}function y(a,e){var n=[],r="";r=0===p.weekStartDay?Number(e)?6===e?7:6-e:6:Number(e)?6===e?1:7-e:7;for(var d=0;d<r;d++){var o={str:+a.format("D"),current:a.isSame(p.today.date),fade:!0,date:a.toArray(),afterCurrentNextMonth:a.isAfter(p.today.date),active:!1,nextMonth:!0,selected:a.isBetween(p.startSelection,p.endSelection,null,"[]"),dayStart:a.isSame(t(p.startSelection)),dayEnd:a.isSame(t(p.endSelection))};n.push(o),a.add(1,"day")}return n}function m(a){p.startSelection=t(new Date(a.start)),p.endSelection=t(new Date(a.end)),p.inputStart=t(new Date(a.start)).format("L"),p.inputEnd=t(new Date(a.end)).format("L"),p.output={start:p.inputStart,end:p.inputEnd},p.monthShow=new p.calendarArray(p.today.date)}function u(t){"calendarShow"===t?(p.calendarShow=!p.calendarShow,p.rangeShow=!1):"rangeShow"===t&&(p.rangeShow=!p.rangeShow,p.calendarShow=!1)}function f(t){return t.format("L")}function v(){for(var a=0,e=p.listArr.length;a<e;a++)p.listArr[a].days<30?(p.listArr[a].start=t(p.today.date).subtract(p.listArr[a].days-1,"days"),p.listArr[a].end=p.today.date):(p.listArr[a].start=t(p.today.date).subtract(p.listArr[a].days,"days").startOf("month"),p.listArr[a].end=t(p.today.date).subtract(1,"month").endOf("month").startOf("day"));return p.listArr}function S(){return[{label:"Last Week",start:t(p.today.date).subtract(6,"days"),end:p.today.date},{label:"Last 15 days",start:t(p.today.date).subtract(14,"days"),end:p.today.date},{label:"Last 30 days",start:t(p.today.date).subtract(29,"days"),end:p.today.date},{label:"Last month",start:t(p.today.date).subtract(30,"days").startOf("month"),end:t(p.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last 3 months",start:t(p.today.date).subtract(3,"month").startOf("month"),end:t(p.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last 6 months",start:t(p.today.date).subtract(6,"month").startOf("month"),end:t(p.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last year",start:t(p.today.date).subtract(12,"month").startOf("month"),end:t(p.today.date).subtract(1,"month").endOf("month").startOf("day")}]}var p=this;p.rangeShow=!1,p.calendarShow=!1,p.selectedDays=[],function(){p.locale=p.locale||a.locale,p.todayBtn=p.todayBtn||a.todayBtn,p.numberOfDays=p.numberOfDays||a.numberOfDays,p.listShow=p.listShow||a.listShow,p.dateEnd=p.dateEnd||a.dateEnd,p.dateStart=p.dateStart||a.dateStart,p.locale=p.locale&&""!==p.locale?p.locale:"en",t.locale(p.locale),p.localeInfo=t.localeData(),p.weekStartDay=p.localeInfo._week.dow;var e=t(new Date);p.todayForFront=e.format("DD.MM.YYYY"),p.today={date:e.startOf("day"),year:e.format("YYYY"),month:e.format("M")},p.month={name:e.format("MMMM"),id:e.format("M")},p.year=e.year(),p.endSelection=e.startOf("day").toArray(),p.startSelection=t(p.endSelection).subtract(p.numberOfDays,"day").startOf("day").toArray(),p.inputStart=t(p.startSelection).format("L"),p.inputEnd=t(p.endSelection).format("L"),p.output={start:p.inputStart,end:p.inputEnd},setTimeout(function(){p.listArr=p.listArr||a.listArr,p.listShow?Array.isArray(p.listArr)?p.list=v():p.list=S():p.list=""},300)}(),p.getDay=r,p.daySelect=d,p.activeRange=o,p.monthChange=s,p.yearChange=l,p.calendarArray=i,p.listSelected=m,p.showPopup=u,p.getDaysNames=n,p.getPreviousMonth=c,p.getCurrentMonth=h,p.getNextMonth=y,p.formatFrontDate=f,e.$on("updateDate",function(a,e){p.endSelection=t(e.end,p.localeInfo._longDateFormat.L),p.startSelection=t(e.start,p.localeInfo._longDateFormat.L),p.inputStart=t(p.startSelection).format("L"),p.inputEnd=t(p.endSelection).format("L"),p.output={start:p.inputStart,end:p.inputEnd},p.monthShow=new p.calendarArray(p.today.date)}),p.days=p.getDaysNames(p.weekStartDay,p.localeInfo._weekdaysMin),p.monthShow=new p.calendarArray(p.today.date)}function e(t){var a={};this.setData=function(e,n,r){return a={start:e,end:n},r&&t.$emit("updateDate",a),a},this.getData=function(){return a}}angular.module("redDatepickerModule",[]).constant("moment",window.moment).directive("redDatepicker",t).service("redDatepickerService",e),a.$inject=["moment","$attrs","$rootScope"],e.$inject=["$rootScope"]}(),angular.module("redDatepickerModule").run(["$templateCache",function(t){t.put("angular-red-datepicker.html",'<div class="calendar"><div class="output"><div class="output__field"><div class="output__field_start">{{calendar.inputStart}}</div><div class="output__field_separator">&mdash;</div><div class="output__field_end">{{calendar.inputEnd}}</div></div><div class="output__btns"><div id="calendar-list-btn" ng-click="calendar.showPopup(\'calendarShow\')"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></svg></div><div ng-if="calendar.todayBtn" id="calendar-today-btn" ng-click="calendar.activeRange([calendar.todayForFront, calendar.todayForFront])"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></svg></div><div ng-if="calendar.listShow" id="range-list-btn" ng-click="calendar.showPopup(\'rangeShow\')"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></div></div></div><div ng-mouseleave="calendar.calendarShow = false" class="calendar-box calendar-box-show" ng-if="calendar.calendarShow"><div class="switchers"><div class="month"><i class="left" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'left\')"></i> <span>{{calendar.month.name}}</span> <i class="right" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'right\')" ng-hide="calendar.today.month == calendar.month.id && calendar.today.year == calendar.year"></i></div><div class="year"><i class="left" aria-hidden="true" ng-click="calendar.yearChange(\'left\')"></i> <span>{{calendar.year}}</span> <i class="right" aria-hidden="true" ng-click="calendar.yearChange(\'right\')" ng-hide="calendar.today.year <= calendar.year"></i></div></div><div class="calendar-container"><ul class="days-name"><li ng-repeat="dayName in calendar.days track by $index">{{dayName}}</li></ul><ul class="calendar-body"><li class="day" ng-repeat="day in calendar.monthShow" ng-class="{ \'day_fade\': day.fade, \'day_current\': day.current, \'day_cantUse\': day.afterCurrent, \'day_fadeNonClick\': day.afterCurrentNextMonth, \'day_active\': day.active, \'day_selected\': day.selected, \'day_start\': day.dayStart, \'day_end\': day.dayEnd }" ng-click="calendar.getDay(day)">{{day.str}}</li></ul></div></div><div ng-mouseleave="calendar.rangeShow = false" ng-if="calendar.listShow && calendar.rangeShow" class="range-list range-list-show"><ul><li ng-repeat="item in calendar.list" ng-click="calendar.listSelected(item)"><span class="item-name">{{item.label}}</span> <span class="item-date-start">{{calendar.formatFrontDate(item.start)}}</span> <span class="item-date-separator">&mdash;</span> <span class="item-date-end">{{calendar.formatFrontDate(item.end)}}</span></li></ul></div></div>')}]);