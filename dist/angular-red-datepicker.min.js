/*!
 * angular-red-datepicker
 * https://github.com/johnnyswan/angular-red-datepicker
 * Red Swan
 * Version: 0.1.4 - 2017-04-05T15:09:09.471Z
 * License: MIT
 */
!function(){"use strict";function t(t,a,e){function n(t,a){return 1===t&&a.push(a.splice(0,1)[0]),a}function r(t){t.fade&&!t.afterCurrentNextMonth?t.beforeMonth?g.monthChange(g.month.id,"left"):t.nextMonth&&g.monthChange(g.month.id,"right"):g.daySelect(t)}function d(t){if(!t.afterCurrentNextMonth&&!t.afterCurrent)if(t.active=!t.active,2===g.selectedDays.length){for(var a=0,e=g.selectedDays.length;a<e;a++)g.selectedDays[a].active=!1;g.selectedDays.length=0,g.selectedDays.push(t)}else 1===g.selectedDays.length?(g.selectedDays.push(t),g.activeRange(g.selectedDays)):g.selectedDays.push(t)}function o(a){t(a[0].date).isBefore(a[1].date)?(g.startSelection=t(a[0].date).toArray(),g.endSelection=t(a[1].date).toArray()):(g.startSelection=t(a[1].date).toArray(),g.endSelection=t(a[0].date).toArray()),g.inputStart=t(g.startSelection).format("L"),g.inputEnd=t(g.endSelection).format("L"),g.output={start:g.inputStart,end:g.inputEnd},g.monthShow=new g.calendarArray(t([g.year,g.month.id-1,1]))}function s(a,e){var n=t([g.year,a-1,1]);"left"===e?(1===+g.month.id&&(g.year=n.subtract(1,"year").format("YYYY")),g.month.name=n.subtract(1,"month").format("MMMM"),g.month.id=t().month(g.month.name).format("M"),g.monthShow=new g.calendarArray(t([g.year,g.month.id-1,1]))):"right"===e&&(12===+g.month.id&&(g.year=n.add(1,"year").format("YYYY")),g.month.name=n.add(1,"month").format("MMMM"),g.month.id=t().month(g.month.name).format("M"),g.monthShow=new g.calendarArray(t([g.year,g.month.id-1,1])))}function l(a){var e=t([g.year,g.month.id-1,1]);"left"===a?(g.year=e.subtract(1,"year").format("YYYY"),g.monthShow=new g.calendarArray(t([g.year,g.month.id-1,1]))):"right"===a&&(g.year=e.add(1,"year").format("YYYY"),g.monthShow=new g.calendarArray(t([g.year,g.month.id-1,1])))}function i(a){var e=t(a).startOf("month"),n=t(a).subtract(1,"month").endOf("month").startOf("day"),r=t(a).add(1,"month").startOf("month"),d=t(a).startOf("month").format("d"),o=t(a).endOf("month").format("d");return g.getPreviousMonth(n,d).concat(g.getCurrentMonth(e),g.getNextMonth(r,o))}function c(a,e){var n,r,d=[];n=0===g.weekStartDay?Number(e)?1===e?8:e:7:Number(e)?1===e?7:e-1:6,r=a.subtract(n-1,"day");for(var o=0;o<n;o++){var s={str:+r.format("D"),current:r.isSame(g.today.date),date:r.toArray(),fade:!0,active:!1,beforeMonth:!0,selected:r.isBetween(g.startSelection,g.endSelection,null,"[]"),dayStart:r.isSame(t(g.startSelection)),dayEnd:r.isSame(t(g.endSelection))};d.push(s),r.add(1,"day")}return d}function h(a){for(var e=[],n=0,r=a.daysInMonth();n<r;n++){var d={str:+a.format("D"),current:a.isSame(g.today.date),date:a.toArray(),fade:!1,afterCurrent:a.isAfter(g.today.date),active:!1,selected:a.isBetween(g.startSelection,g.endSelection,null,"[]"),dayStart:a.isSame(t(g.startSelection)),dayEnd:a.isSame(t(g.endSelection))};e.push(d),a.add(1,"day")}return e}function y(a,e){var n,r=[];n=0===g.weekStartDay?Number(e)?6===e?7:6-e:6:Number(e)?6===e?1:7-e:7;for(var d=0;d<n;d++){var o={str:+a.format("D"),current:a.isSame(g.today.date),fade:!0,date:a.toArray(),afterCurrentNextMonth:a.isAfter(g.today.date),active:!1,nextMonth:!0,selected:a.isBetween(g.startSelection,g.endSelection,null,"[]"),dayStart:a.isSame(t(g.startSelection)),dayEnd:a.isSame(t(g.endSelection))};r.push(o),a.add(1,"day")}return r}function m(a){g.startSelection=t(new Date(a.start)),g.endSelection=t(new Date(a.end)),g.inputStart=t(new Date(a.start)).format("L"),g.inputEnd=t(new Date(a.end)).format("L"),g.output={start:g.inputStart,end:g.inputEnd},g.monthShow=new g.calendarArray(g.today.date)}function u(t){"calendarShow"===t?(g.calendarShow=!g.calendarShow,g.rangeShow=!1):"rangeShow"===t&&(g.rangeShow=!g.rangeShow,g.calendarShow=!1)}function f(t){return t.format("L")}function v(){for(var a=0,e=g.listArr.length;a<e;a++)g.listArr[a].days<30?(g.listArr[a].start=t(g.today.date).subtract(g.listArr[a].days-1,"days"),g.listArr[a].end=g.today.date):(g.listArr[a].start=t(g.today.date).subtract(g.listArr[a].days,"days").startOf("month"),g.listArr[a].end=t(g.today.date).subtract(1,"month").endOf("month").startOf("day"));return g.listArr}function S(){return[{label:"Last Week",start:t(g.today.date).subtract(6,"days"),end:g.today.date},{label:"Last 15 days",start:t(g.today.date).subtract(14,"days"),end:g.today.date},{label:"Last 30 days",start:t(g.today.date).subtract(29,"days"),end:g.today.date},{label:"Last month",start:t(g.today.date).subtract(30,"days").startOf("month"),end:t(g.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last 3 months",start:t(g.today.date).subtract(3,"month").startOf("month"),end:t(g.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last 6 months",start:t(g.today.date).subtract(6,"month").startOf("month"),end:t(g.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last year",start:t(g.today.date).subtract(12,"month").startOf("month"),end:t(g.today.date).subtract(1,"month").endOf("month").startOf("day")}]}var g=this;g.rangeShow=!1,g.calendarShow=!1,g.selectedDays=[],function(){g.locale=g.locale||a.locale,g.todayBtn=g.todayBtn||a.todayBtn,g.numberOfDays=g.numberOfDays||a.numberOfDays,g.listShow=g.listShow||a.listShow,g.dateEnd=g.dateEnd||a.dateEnd,g.dateStart=g.dateStart||a.dateStart,g.locale=g.locale&&""!==g.locale?g.locale:"en",t.locale(g.locale),g.localeInfo=t.localeData(),g.weekStartDay=g.localeInfo._week.dow;var e=t(new Date);g.todayForFront=e.format(g.localeInfo._longDateFormat.L),g.today={date:e.startOf("day"),year:e.format("YYYY"),month:e.format("M")},g.month={name:e.format("MMMM"),id:e.format("M")},g.year=e.year(),g.endSelection=e.startOf("day").toArray(),g.startSelection=t(g.endSelection).subtract(g.numberOfDays,"day").startOf("day").toArray(),g.inputStart=t(g.startSelection).format("L"),g.inputEnd=t(g.endSelection).format("L"),g.output={start:g.inputStart,end:g.inputEnd},g.listArr=g.listArr||a.listArr,g.listShow?Array.isArray(g.listArr)?g.list=v():g.list=S():g.list=""}(),g.getDay=r,g.daySelect=d,g.activeRange=o,g.monthChange=s,g.yearChange=l,g.calendarArray=i,g.listSelected=m,g.showPopup=u,g.getDaysNames=n,g.getPreviousMonth=c,g.getCurrentMonth=h,g.getNextMonth=y,g.formatFrontDate=f,e.$on("updateDate",function(a,e){g.endSelection=t(e.end,g.localeInfo._longDateFormat.L),g.startSelection=t(e.start,g.localeInfo._longDateFormat.L),g.inputStart=t(g.startSelection).format("L"),g.inputEnd=t(g.endSelection).format("L"),g.output={start:g.inputStart,end:g.inputEnd},g.monthShow=new g.calendarArray(g.today.date)}),g.days=g.getDaysNames(g.weekStartDay,g.localeInfo._weekdaysMin),g.monthShow=new g.calendarArray(g.today.date)}function a(t){var a={};this.setData=function(e,n,r){return a={start:e,end:n},r&&t.$emit("updateDate",a),a},this.getData=function(){return a}}angular.module("redDatepickerModule",[]).constant("moment",window.moment).service("redDatepickerService",a).component("redDatepicker",{templateUrl:"angular-red-datepicker.html",bindings:{locale:"<",output:"=",todayBtn:"<",numberOfDays:"<",listShow:"<",listArr:"<"},controller:t,controllerAs:"calendar"}),t.$inject=["moment","$attrs","$rootScope"],a.$inject=["$rootScope"]}(),angular.module("redDatepickerModule").run(["$templateCache",function(t){t.put("angular-red-datepicker.html",'<div class="calendar"><div class="output"><div class="output__field"><div class="output__field_start">{{calendar.inputStart}}</div><div class="output__field_separator">&mdash;</div><div class="output__field_end">{{calendar.inputEnd}}</div></div><div class="output__btns"><div id="calendar-list-btn" ng-click="calendar.showPopup(\'calendarShow\')"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></svg></div><div ng-if="calendar.todayBtn" id="calendar-today-btn" ng-click="calendar.activeRange([calendar.todayForFront, calendar.todayForFront])"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></svg></div><div ng-if="calendar.listShow" id="range-list-btn" ng-click="calendar.showPopup(\'rangeShow\')"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></div></div></div><div ng-mouseleave="calendar.calendarShow = false" class="calendar-box calendar-box-show" ng-if="calendar.calendarShow"><div class="switchers"><div class="month"><i class="left" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'left\')"></i> <span>{{calendar.month.name}}</span> <i class="right" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'right\')" ng-hide="calendar.today.month == calendar.month.id && calendar.today.year == calendar.year"></i></div><div class="year"><i class="left" aria-hidden="true" ng-click="calendar.yearChange(\'left\')"></i> <span>{{calendar.year}}</span> <i class="right" aria-hidden="true" ng-click="calendar.yearChange(\'right\')" ng-hide="calendar.today.year <= calendar.year"></i></div></div><div class="calendar-container"><ul class="days-name"><li ng-repeat="dayName in calendar.days track by $index">{{dayName}}</li></ul><ul class="calendar-body"><li class="day" ng-repeat="day in calendar.monthShow" ng-class="{ \'day_fade\': day.fade, \'day_current\': day.current, \'day_cantUse\': day.afterCurrent, \'day_fadeNonClick\': day.afterCurrentNextMonth, \'day_active\': day.active, \'day_selected\': day.selected, \'day_start\': day.dayStart, \'day_end\': day.dayEnd }" ng-click="calendar.getDay(day)">{{day.str}}</li></ul></div></div><div ng-mouseleave="calendar.rangeShow = false" ng-if="calendar.listShow && calendar.rangeShow" class="range-list range-list-show"><ul><li ng-repeat="item in calendar.list" ng-click="calendar.listSelected(item)"><span class="item-name">{{item.label}}</span> <span class="item-date-start">{{calendar.formatFrontDate(item.start)}}</span> <span class="item-date-separator">&mdash;</span> <span class="item-date-end">{{calendar.formatFrontDate(item.end)}}</span></li></ul></div></div>')}]);