/*!
 * angular-red-datepicker
 * https://github.com/johnnyswan/angular-red-datepicker
 * Red Swan
 * Version: 0.1.2 - 2017-02-27T15:43:37.587Z
 * License: MIT
 */
!function(){"use strict";function t(){return{restrict:"E",templateUrl:"angular-red-datepicker.html",scope:{locale:"@?",output:"=?",todayBtn:"@?",numberOfDays:"@?",listShow:"@?",listArr:"=?"},controller:a,controllerAs:"calendar",bindToController:!0}}function a(t,a,e,n){function r(t,a){return 1===t&&a.push(a.splice(0,1)[0]),a}function d(t){t.fade&&!t.afterCurrentNextMonth?t.beforeMonth?S.monthChange(S.month.id,"left"):t.nextMonth&&S.monthChange(S.month.id,"right"):S.daySelect(t)}function o(t){t.afterCurrentNextMonth||t.afterCurrent||(t.active=!t.active,2===S.selectedDays.length?(a.forEach(S.selectedDays,function(t){t.active=!1}),a.remove(S.selectedDays),S.selectedDays.push(t)):1===S.selectedDays.length?(S.selectedDays.push(t),S.activeRange(S.selectedDays)):S.selectedDays.push(t))}function s(a){t(a[0].date).isBefore(a[1].date)?(S.startSelection=t(a[0].date).toArray(),S.endSelection=t(a[1].date).toArray()):(S.startSelection=t(a[1].date).toArray(),S.endSelection=t(a[0].date).toArray()),S.inputStart=t(S.startSelection).format("L"),S.inputEnd=t(S.endSelection).format("L"),S.output={start:S.inputStart,end:S.inputEnd},S.monthShow=new S.calendarArray(t([S.year,S.month.id-1,1]))}function i(a,e){var n=t([S.year,a-1,1]);"left"===e?(1===+S.month.id&&(S.year=n.subtract(1,"year").format("YYYY")),S.month.name=n.subtract(1,"month").format("MMMM"),S.month.id=t().month(S.month.name).format("M"),S.monthShow=new S.calendarArray(t([S.year,S.month.id-1,1]))):"right"===e&&(12===+S.month.id&&(S.year=n.add(1,"year").format("YYYY")),S.month.name=n.add(1,"month").format("MMMM"),S.month.id=t().month(S.month.name).format("M"),S.monthShow=new S.calendarArray(t([S.year,S.month.id-1,1])))}function l(a){var e=t([S.year,S.month.id-1,1]);"left"===a?(S.year=e.subtract(1,"year").format("YYYY"),S.monthShow=new S.calendarArray(t([S.year,S.month.id-1,1]))):"right"===a&&(S.year=e.add(1,"year").format("YYYY"),S.monthShow=new S.calendarArray(t([S.year,S.month.id-1,1])))}function c(e){var n=t(e).startOf("month"),r=t(e).subtract(1,"month").endOf("month").startOf("day"),d=t(e).add(1,"month").startOf("month"),o=t(e).startOf("month").format("d"),s=t(e).endOf("month").format("d");return a.reverse(S.getNextMonth(d,s).concat(S.getCurrentMonth(n),S.getPreviousMonth(r,o)))}function h(e,n){var r=[],d="";return d=0===S.weekStartDay?Number(n)?1===n?8:n:7:Number(n)?1===n?7:n-1:6,a.times(d,function(){var a={str:+e.format("D"),current:e.isSame(S.today.date),date:e.toArray(),fade:!0,active:!1,beforeMonth:!0,selected:e.isBetween(S.startSelection,S.endSelection,null,"[]"),dayStart:e.isSame(t(S.startSelection)),dayEnd:e.isSame(t(S.endSelection))};r.push(a),e.subtract(1,"day")}),r}function m(e){var n=[];return a.times(e.daysInMonth(),function(){var a={str:+e.format("D"),current:e.isSame(S.today.date),date:e.toArray(),fade:!1,afterCurrent:e.isAfter(S.today.date),active:!1,selected:e.isBetween(S.startSelection,S.endSelection,null,"[]"),dayStart:e.isSame(t(S.startSelection)),dayEnd:e.isSame(t(S.endSelection))};n.push(a),e.add(1,"day")}),a.reverse(n),n}function y(e,n){var r=[],d="";return d=0===S.weekStartDay?Number(n)?6===n?7:6-n:6:Number(n)?6===n?1:7-n:7,a.times(d,function(){var a={str:+e.format("D"),current:e.isSame(S.today.date),fade:!0,date:e.toArray(),afterCurrentNextMonth:e.isAfter(S.today.date),active:!1,nextMonth:!0,selected:e.isBetween(S.startSelection,S.endSelection,null,"[]"),dayStart:e.isSame(t(S.startSelection)),dayEnd:e.isSame(t(S.endSelection))};r.push(a),e.add(1,"day")}),a.reverse(r)}function u(a){S.startSelection=t(new Date(a.start)),S.endSelection=t(new Date(a.end)),S.inputStart=t(new Date(a.start)).format("L"),S.inputEnd=t(new Date(a.end)).format("L"),S.output={start:S.inputStart,end:S.inputEnd},S.monthShow=new S.calendarArray(S.today.date)}function f(t){"calendarShow"===t?(S.calendarShow=!S.calendarShow,S.rangeShow=!1):"rangeShow"===t&&(S.rangeShow=!S.rangeShow,S.calendarShow=!1)}function v(t){return t.format("L")}var S=this;!function(){S.locale=S.locale||e.locale,S.todayBtn=S.todayBtn||e.todayBtn,S.numberOfDays=S.numberOfDays||e.numberOfDays,S.listShow=S.listShow||e.listShow,S.dateEnd=S.dateEnd||e.dateEnd,S.dateStart=S.dateStart||e.dateStart,S.rangeShow=!1,S.calendarShow=!1,S.locale=S.locale&&""!==S.locale?S.locale:"en",t.locale(S.locale),S.localeInfo=t.localeData(),S.weekStartDay=S.localeInfo._week.dow;var n=t(new Date);S.todayForFront=n.format("DD.MM.YYYY"),S.today={date:n.startOf("day"),year:n.format("YYYY"),month:n.format("M")},S.month={name:n.format("MMMM"),id:n.format("M")},S.year=n.year(),S.selectedDays=[],S.endSelection=n.startOf("day").toArray(),S.startSelection=t(S.endSelection).subtract(S.numberOfDays,"day").startOf("day").toArray(),S.inputStart=t(S.startSelection).format("L"),S.inputEnd=t(S.endSelection).format("L"),S.output={start:S.inputStart,end:S.inputEnd},setTimeout(function(){S.listArr=S.listArr||e.listArr,S.listShow?Array.isArray(S.listArr)?(a.forEach(S.listArr,function(a){a.days<30?(a.start=t(S.today.date).subtract(a.days-1,"days"),a.end=S.today.date):(a.start=t(S.today.date).subtract(a.days,"days").startOf("month"),a.end=t(S.today.date).subtract(1,"month").endOf("month").startOf("day"))}),S.list=S.listArr):S.list=[{label:"Last Week",start:t(S.today.date).subtract(6,"days"),end:S.today.date},{label:"Last 15 days",start:t(S.today.date).subtract(14,"days"),end:S.today.date},{label:"Last 30 days",start:t(S.today.date).subtract(29,"days"),end:S.today.date},{label:"Last month",start:t(S.today.date).subtract(30,"days").startOf("month"),end:t(S.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last 3 months",start:t(S.today.date).subtract(3,"month").startOf("month"),end:t(S.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last 6 months",start:t(S.today.date).subtract(6,"month").startOf("month"),end:t(S.today.date).subtract(1,"month").endOf("month").startOf("day")},{label:"Last year",start:t(S.today.date).subtract(12,"month").startOf("month"),end:t(S.today.date).subtract(1,"month").endOf("month").startOf("day")}]:S.list=""},300)}(),S.getDay=d,S.daySelect=o,S.activeRange=s,S.monthChange=i,S.yearChange=l,S.calendarArray=c,S.listSelected=u,S.showPopup=f,S.getDaysNames=r,S.getPreviousMonth=h,S.getCurrentMonth=m,S.getNextMonth=y,S.formatFrontDate=v,n.$on("updateDate",function(a,e){S.endSelection=t(e.end,S.localeInfo._longDateFormat.L),S.startSelection=t(e.start,S.localeInfo._longDateFormat.L),S.inputStart=t(S.startSelection).format("L"),S.inputEnd=t(S.endSelection).format("L"),S.output={start:S.inputStart,end:S.inputEnd},S.monthShow=new S.calendarArray(S.today.date)}),S.days=S.getDaysNames(S.weekStartDay,S.localeInfo._weekdaysMin),S.monthShow=new S.calendarArray(S.today.date)}function e(t){var a={};this.setData=function(e,n,r){return a={start:e,end:n},r&&t.$emit("updateDate",a),a}}angular.module("redDatepickerModule",[]).constant("moment",window.moment).constant("_",window._).directive("redDatepicker",t).service("redDatepickerService",e),a.$inject=["moment","_","$attrs","$rootScope"],e.$inject=["$rootScope"]}(),angular.module("redDatepickerModule").run(["$templateCache",function(t){t.put("angular-red-datepicker.html",'<div class="calendar"><div class="output"><div class="output__field"><div class="output__field_start">{{calendar.inputStart}}</div><div class="output__field_separator">&mdash;</div><div class="output__field_end">{{calendar.inputEnd}}</div></div><div class="output__btns"><div id="calendar-list-btn" ng-click="calendar.showPopup(\'calendarShow\')"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path></svg></div><div ng-if="calendar.todayBtn" id="calendar-today-btn" ng-click="calendar.activeRange([calendar.todayForFront, calendar.todayForFront])"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M0 0h24v24H0z" fill="none"></path><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"></path></svg></div><div ng-if="calendar.listShow" id="range-list-btn" ng-click="calendar.showPopup(\'rangeShow\')"><svg height="24" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M14 17H4v2h10v-2zm6-8H4v2h16V9zM4 15h16v-2H4v2zM4 5v2h16V5H4z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></div></div></div><div ng-mouseleave="calendar.calendarShow = false" class="calendar-box calendar-box-show" ng-show="calendar.calendarShow"><div class="switchers"><div class="month"><i class="left" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'left\')"></i> <span>{{calendar.month.name}}</span> <i class="right" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'right\')" ng-hide="calendar.today.month == calendar.month.id"></i></div><div class="year"><i class="left" aria-hidden="true" ng-click="calendar.yearChange(\'left\')"></i> <span>{{calendar.year}}</span> <i class="right" aria-hidden="true" ng-click="calendar.yearChange(\'right\')" ng-hide="calendar.today.year == calendar.year"></i></div></div><div class="calendar-container"><ul class="days-name"><li ng-repeat="dayName in calendar.days track by $index">{{dayName}}</li></ul><ul class="calendar-body"><li class="day" ng-repeat="day in calendar.monthShow" ng-class="{ \'day_fade\': day.fade, \'day_current\': day.current, \'day_cantUse\': day.afterCurrent, \'day_fadeNonClick\': day.afterCurrentNextMonth, \'day_active\': day.active, \'day_selected\': day.selected, \'day_start\': day.dayStart, \'day_end\': day.dayEnd }" ng-click="calendar.getDay(day)">{{day.str}}</li></ul></div></div><div ng-mouseleave="calendar.rangeShow = false" ng-if="calendar.listShow" class="range-list range-list-show" ng-show="calendar.rangeShow"><ul><li ng-repeat="item in calendar.list" ng-click="calendar.listSelected(item)"><span class="item-name">{{item.label}}</span> <span class="item-date-start">{{calendar.formatFrontDate(item.start)}}</span> <span class="item-date-separator">&mdash;</span> <span class="item-date-end">{{calendar.formatFrontDate(item.end)}}</span></li></ul></div></div>')}]);