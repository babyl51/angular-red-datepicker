/*!
 * angular-red-datepicker
 * https://github.com/johnnyswan/angular-red-datepicker
 * Red Swan
 * Version: 0.0.1 - 2016-10-19T19:19:15.887Z
 * License: MIT
 */
!function(){"use strict";function t(){return{restrict:"E",templateUrl:"angular-red-datepicker.html",scope:{locale:"@locale",earliestDate:"@earliestDate",latestDate:"@latestDate",listShow:"=listShow",single:"=single"},controller:a,controllerAs:"calendar",bindToController:!0}}function a(t,a,e,n){function r(t,a){return 1==t&&a.push(a.splice(0,1)[0]),a}function d(t){t.fade&&!t.afterCurrentNextMonth?t.beforeMonth?f.monthChange(f.month.id,"left"):t.nextMonth&&f.monthChange(f.month.id,"right"):f.daySelect(t)}function o(t){t.afterCurrentNextMonth||t.afterCurrent||(t.active=!t.active,2==f.selectedDays.length?(n.forEach(f.selectedDays,function(t){t.active=!1}),n.remove(f.selectedDays),f.selectedDays.push(t)):1==f.selectedDays.length?(f.selectedDays.push(t),f.activeRange(f.selectedDays)):f.selectedDays.push(t))}function s(a){e(a[0].date).isBefore(a[1].date)?(f.startSelection=e(a[0].date).toArray(),f.endSelection=e(a[1].date).toArray()):(f.startSelection=e(a[1].date).toArray(),f.endSelection=e(a[0].date).toArray()),f.inputStart=e(f.startSelection).format("L"),f.inputEnd=e(f.endSelection).format("L"),t.setData(f.inputStart,f.inputEnd),f.monthShow=new f.calendarArray(e([f.year,f.month.id-1,1]))}function l(t,a){var n=e([f.year,t-1,1]);"left"==a?(1==f.month.id&&(f.year=n.subtract(1,"year").format("YYYY")),f.month.name=n.subtract(1,"month").format("MMMM"),f.month.id=e().month(f.month.name).format("M"),f.monthShow=new f.calendarArray(e([f.year,f.month.id-1,1]))):"right"==a&&(12==f.month.id&&(f.year=n.add(1,"year").format("YYYY")),f.month.name=n.add(1,"month").format("MMMM"),f.month.id=e().month(f.month.name).format("M"),f.monthShow=new f.calendarArray(e([f.year,f.month.id-1,1])))}function i(t){var a=e([f.year,f.month.id-1,1]);"left"==t?(f.year=a.subtract(1,"year").format("YYYY"),f.monthShow=new f.calendarArray(e([f.year,f.month.id-1,1]))):"right"==t&&(f.year=a.add(1,"year").format("YYYY"),f.monthShow=new f.calendarArray(e([f.year,f.month.id-1,1])))}function c(t){f.beforeMonthShow=[],f.currentMonthShow=[],f.nextMonthShow=[],f.currentMonth=e(t).startOf("month"),f.beforeMonth=e(t).subtract(1,"month").endOf("month").startOf("day"),f.nextMonth=e(t).add(1,"month").startOf("month"),f.startDay=e(t).startOf("month").format("d"),f.endDay=e(t).endOf("month").format("d");var a="";a=0==f.weekStartDay?Number(f.startDay)?1==f.startDay?8:f.startDay:7:Number(f.startDay)?1==f.startDay?7:f.startDay-1:6,n.times(a,function(t){var a=f.beforeMonth,e={str:+a.format("D"),current:a.isSame(f.today.date),date:a.toArray(),fade:!0,active:!1,beforeMonth:!0,start:a.isSame(f.startSelection),end:a.isSame(f.endSelection),isBetween:a.isBetween(f.startSelection,f.endSelection)};f.beforeMonthShow.push(e),a.subtract(1,"day")}),n.times(f.currentMonth.daysInMonth(),function(t){var a=f.currentMonth,e={str:+a.format("D"),current:a.isSame(f.today.date),date:a.toArray(),fade:!1,afterCurrent:a.isAfter(f.today.date),active:!1,start:a.isSame(f.startSelection),end:a.isSame(f.endSelection),isBetween:a.isBetween(f.startSelection,f.endSelection)};f.currentMonthShow.push(e),a.add(1,"day")}),n.reverse(f.beforeMonthShow);var r="";return r=0==f.weekStartDay?Number(f.endDay)?6==f.endDay?7:6-f.endDay:6:Number(f.endDay)?6==f.endDay?1:7-f.endDay:7,n.times(r,function(t){var a=f.nextMonth,e={str:+a.format("D"),current:a.isSame(f.today.date),fade:!0,date:a.toArray(),afterCurrentNextMonth:a.isAfter(f.today.date),active:!1,nextMonth:!0,start:a.isSame(f.startSelection),end:a.isSame(f.endSelection),isBetween:a.isBetween(f.startSelection,f.endSelection)};f.nextMonthShow.push(e),a.add(1,"day")}),f.beforeMonthShow.concat(f.currentMonthShow,f.nextMonthShow)}function h(a){f.startSelection=e(new Date(a.start)),f.endSelection=e(new Date(a.end)),f.inputStart=a.start,f.inputEnd=a.end,t.setData(f.inputStart,f.inputEnd),f.monthShow=new f.calendarArray(f.today.date)}function m(t){"calendarShow"==t?(f.calendarShow=!f.calendarShow,f.rangeShow=!1):"rangeShow"==t&&(f.rangeShow=!f.rangeShow,f.calendarShow=!1)}function y(t){var a=/([0-9]{2}\/[0-9]{2}\/[0-9]{4})|([0-9]{2}-[0-9]{2}-[0-9]{4})|([0-9]{2}.[0-9]{2}.[0-9]{4})|([0-9]{4}\/[0-9]{2}\/[0-9]{2})|([0-9]{4}-[0-9]{2}-[0-9]{2})|([0-9]{4}.[0-9]{2}.[0-9]{2})/g;t.match(a)?f.validateDate(t):10==t.length&&console.log("wrong format")}function u(t){var a=e(new Date(t));a.isValid()?console.log(a+" date is valid"):console.log(a+" date is invalid")}var f=this;f.locale=f.locale&&""!=f.locale?f.locale:"en",e.locale(f.locale),f.localeInfo=e.localeData(),f.weekStartDay=f.localeInfo._week.dow,f.earliestDate=f.earliestDate&&""!==f.earliestDate?f.earliestDate:"January 01, 1990",f.latestDate=f.latestDate&&""!==f.latestDate?f.latestDate:"December 31, 2030",f.earliest_date=e(new Date(f.earliestDate)).startOf("day"),f.latest_date=e(new Date(f.latestDate)).startOf("day");var S=e(new Date);f.todayForFront=S.format("DD"),f.today={date:S.startOf("day"),year:S.format("YYYY"),month:S.format("M")},f.month={name:S.format("MMMM"),id:S.format("M")},f.year=S.year(),f.selectedDays=[],f.endSelection=S.startOf("day").toArray(),f.startSelection=e(f.endSelection).subtract(6,"day").startOf("day").toArray(),f.rangeShow=!1,f.calendarShow=!1,f.inputStart=e(f.startSelection).format("L"),f.inputEnd=e(f.endSelection).format("L"),a.$watch("calendar.inputStart",function(t,a){f.checkInputs(t)}),a.$watch("calendar.inputEnd",function(t,a){f.checkInputs(t)}),t.setData(f.inputStart,f.inputEnd),f.listShow?f.list=[{label:"Last Week",start:e(f.today.date).subtract(6,"days").format("L"),end:f.today.date.format("L")},{label:"Last 15 days",start:e(f.today.date).subtract(14,"days").format("L"),end:f.today.date.format("L")},{label:"Last 30 days",start:e(f.today.date).subtract(29,"days").format("L"),end:f.today.date.format("L")},{label:"Last month",start:e(f.today.date).subtract(1,"month").startOf("month").format("L"),end:e(f.today.date).subtract(1,"month").endOf("month").startOf("day").format("L")},{label:"Last 3 months",start:e(f.today.date).subtract(3,"month").startOf("month").format("L"),end:e(f.today.date).subtract(1,"month").endOf("month").startOf("day").format("L")},{label:"Last 6 months",start:e(f.today.date).subtract(6,"month").startOf("month").format("L"),end:e(f.today.date).subtract(1,"month").endOf("month").startOf("day").format("L")},{label:"Last year",start:e(f.today.date).subtract(12,"month").startOf("month").format("L"),end:e(f.today.date).subtract(1,"month").endOf("month").startOf("day").format("L")},{label:"All time",start:f.earliest_date.format("L"),end:f.latest_date.format("L")}]:f.list="",f.getDay=d,f.daySelect=o,f.activeRange=s,f.monthChange=l,f.yearChange=i,f.calendarArray=c,f.listSelected=h,f.showPopup=m,f.getDaysNames=r,f.checkInputs=y,f.validateDate=u,f.days=f.getDaysNames(f.weekStartDay,f.localeInfo._weekdaysMin),f.monthShow=new f.calendarArray(f.today.date)}function e(){var t={};return{setData:function(a,e){return t={start:a,end:e}},getData:function(){return t}}}angular.module("redDatepickerModule",[]).constant("moment",moment).constant("_",window._).directive("redDatepicker",t).service("datepickerOutput",e),a.$inject=["datepickerOutput","$scope","moment","_"]}(),angular.module("redDatepickerModule").run(["$templateCache",function(t){t.put("angular-red-datepicker.html",'<div class="calendar" ng-class="{\'calendar-with-range\': calendar.listShow, \'calendar-with-out-range\': !calendar.listShow}"><div class="output"><div class="output-inputs"><div class="output-inputs-start"><input id="date-start" type="text" placeholder="" ng-model="calendar.inputStart" maxlength="10"></div><div class="output-inputs-separator">&mdash;</div><div class="output-inputs-end"><input id="date-end" type="text" placeholder="" ng-model="calendar.inputEnd" maxlength="10"></div></div><div class="output-btns"><div id="calendar-list-btn" ng-click="calendar.showPopup(\'calendarShow\')"><span id="calendar-list-icon">{{calendar.todayForFront}}</span></div><div ng-if="calendar.listShow" id="range-list-btn" ng-click="calendar.showPopup(\'rangeShow\')"></div></div></div><div ng-mouseleave="calendar.calendarShow = false" target="calendar.calendarShow" class="calendar-box calendar-box-show" ng-show="calendar.calendarShow"><div class="switchers"><div class="month"><i class="left" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'left\')"></i> <span>{{calendar.month.name}}</span> <i class="right" aria-hidden="true" ng-click="calendar.monthChange(calendar.month.id, \'right\')" ng-hide="calendar.today.month == calendar.month.id"></i></div><div class="year"><i class="left" aria-hidden="true" ng-click="calendar.yearChange(\'left\')"></i> <span>{{calendar.year}}</span> <i class="right" aria-hidden="true" ng-click="calendar.yearChange(\'right\')" ng-hide="calendar.today.year == calendar.year"></i></div></div><div class="calendar-container"><ul class="days-name"><li ng-repeat="dayName in calendar.days track by $index">{{dayName}}</li></ul><ul class="calendar-body"><li class="day" ng-repeat="day in calendar.monthShow" ng-class="{ \'day__fade\': day.fade, \'day__current\': day.current, \'day__cantUse\': day.afterCurrent, \'day__fadeNonClick\': day.afterCurrentNextMonth, \'day__active\': day.active, \'day__isBetween\': day.isBetween, \'day__start\': day.start, \'day__end\': day.end }" ng-click="calendar.getDay(day)">{{day.str}}</li></ul></div></div><div ng-mouseleave="calendar.rangeShow = false" target="calendar.rangeShow" class="range-list range-list-show" ng-show="calendar.rangeShow"><ul><li ng-repeat="item in calendar.list" ng-click="calendar.listSelected(item)"><span class="item-name">{{item.label}}</span> <span class="item-date-start">{{item.start}}</span> <span class="item-date-separator">&mdash;</span> <span class="item-date-end">{{item.end}}</span></li></ul></div></div>')}]);